
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Removing local npm modules from your development workflow</title>
    <meta name="description" content="Or how I refactored and started publishing all of my modules">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Richard Littauer">
    <meta name="copyright" content="&copy; Richard Littauer 2015">
    <meta name="description" content="My personal website, where I list all of my main projects and occasionally blog.">

    <meta property="og:description" content="My personal website, where I list all of my main projects and occasionally blog." />
    <meta property="og:url" content="http://burntfen.com/" />
    <meta property="og:site_name" content="Richard Littauer" />
    <meta property="og:title" content="Richard Littauer" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="http://burntfen.com/assets/img/avatar.png" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="510" />
    <meta property="og:image:height" content="515" />

    <!-- Twitter: card tags -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@richlitt" />
    <meta name="twitter:title" content="Richard Littauer">
    <meta name="twitter:description" content="My personal website, where I list all of my main projects and occasionally blog.">
    <meta name="twitter:image" content="http://burntfen.com/assets/img/avatar.png">

    <!-- Open Source Protocol -->
    <link rel="profile" href="http://osprotocol.com" />
    <meta property="os:repo" content="https://github.com/RichardLitt/richardlitt.github.com" />
    <meta property="os:rcs_type" content="git" />
    <meta property="os:src" content="git@github.com:RichardLitt/richardlitt.github.com.git" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/assets/css/custom.css" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <link rel="shortcut icon" href="favicon.ico">

    <!-- Le fav and touch icons -->
    <link rel="apple-touch-icon" href="/images/touch-icon-iphone.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/images/touch-icon-ipad.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/images/touch-icon-iphone-retina.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/images/touch-icon-ipad-retina.png" />

  </head>

  <body>

    <div class="navbar navbar-static-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">RICHARD LITTAUER</a>
         </div> <!-- /container -->
       </div> <!-- /navbar-inner -->
     </div> <!-- /navbar -->

    <div class="wrapper">

    <div class="container subpage">

      <div class="content">
        
<div class="page-header">
  <h1>Removing local npm modules from your development workflow</h1>
</div>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="col-md-8 post">
      
<p>While building <a href="https://github.com/BeagleLab/beagle">beagle</a>, I’ve tried to modularize as much as possible. Beagle is a Chrome extension, using browserify and React, that injects a sidebar into any page or PDF on the web. We also rerender PDFs using <a href="https://mozilla.github.io/pdf.js/">PDF.js</a>, and add in the sidebar to the native PDF.js viewer. Beagle is an annotation tool; one of the goals of the product is to be able to eventually build a web portal for anyone to see annotations without having downloaded the Chrome extension, which would mean loading PDFs on our own website. Because of this, I knew fairly early on that some of the styles would be specific to the Chrome extension, and some specific to the website. So, I decided to make a <code class="highlighter-rouge">beagle-style</code> module, to factor out the styles for the extension. I also factored out the code that deals with the PDFjs api into a module, <code class="highlighter-rouge">beagle-pdf</code>.</p>

<p>This was a smart move at the time, but it has become increasingly clear that there must be a better way. What this did was require every developer working on the platform to symlink two other git repositories into their <code class="highlighter-rouge">node_modules</code> folder. I made a shell script to help do this:</p>

<script src="https://gist.github.com/RichardLitt/d668e99f9566dcf386fb.js"></script>

<p>Sure, this is one way to do it. But this means requiring every developer to run this symlink, which is a major barrier to installaton and debugging for people who aren’t interested in the entire app, but just want to test it. Further, this goes against the idea of modularity. If I have to have two connected modules, at all times, and they can’t be unplugged - than why am I making two modules at all?</p>

<p>The first inkling that I could change this came when I considered <code class="highlighter-rouge">beagle-pdf</code>. That module is basically a wrapper around PDF.js, so that I have specific methods I can call that do things with the PDF.js api such as highlight text. At the moment, that module is stable, and works pretty well independantly of the Beagle core. As this is the case, there’s no reason to not publish it and remove the dev environment. If I want to change it live, I can edit the module installed in <code class="highlighter-rouge">node_modules</code> directly, and copy those changes over to another repository, commit, push, and publish them. That’s one removed.</p>

<p><code class="highlighter-rouge">beagle-style</code> is a bit more complex - these styles are hypothetically modular so that the sidebar can be separated from the future web instance. But I’m using React - which means that each component can actually have it’s own styles injected in the React component itself, without having to use an external CSS file. This makes my life a lot easier, too, as I don’t need to require and inject entire CSS files. Further, the web instance shouldn’t look different than the Sidebar, and if it is different, the CSS should reflect that directly where it happens - in the component.</p>

<p>So, we can take that out too. For now, I’ve published the <code class="highlighter-rouge">beagle-style</code> module, but I expect to complete remove it of all of its CSS at some point soon as I work the CSS into the React components. What this means is that now users can clone my repository and just run <code class="highlighter-rouge">npm install</code> and everything works. This is a much easier workflow.</p>

<p>And now that that barrier is lowered, hopefully it will be easier for other devs to work on the project. When in doubt, refactor, minimize, and remove barriers to entry.</p>

      <hr>
      <div class="pagination">
        <ul>
        
          <li class="prev"><a href="/2015-04-14/build-smaller-help-more" title="Build smaller, help more">&larr; Previous</a></li>
        
          <li><a href="/archive.html">Archive</a></li>
        
          <li class="next"><a href="/2015-04-30/100-days-of-code" title="100 Days of Code">Next &rarr;</a></li>
        
        </ul>
      </div>
      <hr>
      


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'richardlitt'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    </div>
    
    <div class="col-md-4">
      <h4>Published</h4>
      <div class="date"><span>26 April 2015</span></div>

    
      <h4>Tags</h4>
      <ul class="tag_box">
      
      


  
     
    	<li><a href="/tags.html#coding-ref">coding <span>5</span></a></li>
     
    	<li><a href="/tags.html#beagle-ref">beagle <span>1</span></a></li>
    
  



      </ul>
      
    </div>
  </div>
</div>


      </div>


              <footer>
              <p>Send me a letter: <a href="mailto:richard@burntfen.com">richard@burntfen.com</a></p>
          <p>Richard Littauer &copy; <script type="text/javascript">
            document.write(new Date().getFullYear());
          </script>.
            <a href="https://github.com/RichardLitt/richardlitt.github.com">Source</a>.
          </p>
        </footer>
    <div class="push"></div>

    </div> <!-- /container -->

  </div> <!-- /wrapper -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/bootstrap.min.js"></script>

    

  </body>
</html>

